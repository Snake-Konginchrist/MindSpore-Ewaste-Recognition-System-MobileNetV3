# 图像预处理工具

本目录包含用于预处理电子垃圾数据集中图像的工具。

## 工具概览

本工具集包含以下主要功能：

1. **图像重命名工具** - 将图像文件重命名为标准格式
2. **图像验证工具** - 检查并修复损坏或有问题的图像
3. **图像格式转换工具** - 转换图像格式和调整大小
4. **图像分析工具** - 生成数据集统计信息和可视化结果

所有工具都可以通过统一的命令行界面访问：

```bash
python preprocess_cli.py
```

或者直接运行特定工具：

```bash
python preprocess_cli.py [rename|validate|convert|analyze]
```

## 图像重命名工具

批量图像重命名工具允许您将数据集中的所有图像重命名为标准格式：`类别_编号.扩展名`（例如，`camera_001.jpg`，`keyboard_023.png`）。

### 功能特点

- 重命名所有类别或特定类别的图像
- 执行干运行以查看将要重命名的内容而不实际进行更改
- 可选择覆盖具有新命名格式的现有文件
- 交互式选择类别的模式
- 用于脚本化的命令行参数

### 使用方法

```bash
# 通过统一界面
python preprocess_cli.py rename

# 或直接使用
python rename_images.py [选项]
```

## 图像验证工具

图像验证工具用于检查数据集中的图像文件，识别损坏或不符合要求的图像，并提供修复或移除这些图像的选项。

### 功能特点

- 检测多种图像问题：损坏文件、空文件、格式不匹配、尺寸异常等
- 提供多种处理选项：仅报告、移动到单独目录、删除或尝试修复
- 支持修复文件扩展名不匹配的问题
- 详细的统计报告

### 使用方法

```bash
# 通过统一界面
python preprocess_cli.py validate

# 或直接使用
python image_validator.py [选项]
```

## 图像格式转换工具

图像格式转换工具用于将数据集中的图像从一种格式转换为另一种格式，例如将JPG转换为PNG，或将所有图像统一为同一格式。

### 功能特点

- 支持多种格式转换：JPG、PNG、BMP、GIF
- 可调整图像尺寸
- 可控制JPEG压缩质量
- 可选择原地转换或创建新目录
- 可选择保留或删除原始文件

### 使用方法

```bash
# 通过统一界面
python preprocess_cli.py convert

# 或直接使用
python image_converter.py [选项]
```

## 图像分析工具

图像统计和可视化工具用于分析数据集中的图像，生成统计信息和可视化结果，帮助了解数据集的特性和分布情况。

### 功能特点

- 分析图像尺寸、格式、颜色分布等特性
- 检测模糊或低质量图像
- 生成数据集统计报告
- 创建可视化图表：类别分布、尺寸分布、文件大小等

### 使用方法

```bash
# 通过统一界面
python preprocess_cli.py analyze

# 或直接使用
python image_analyzer.py [选项]
```

## 系统要求

- Python 3.6 或更高版本
- OpenCV (cv2)
- NumPy
- Matplotlib
- PIL (Pillow)
- tqdm (用于进度条)

## 安装依赖

```bash
pip install opencv-python numpy matplotlib pillow tqdm
```

## 故障排除

如果您遇到任何问题：

1. 确保已安装所有必要的依赖项
2. 检查数据集目录结构是否符合预期
3. 对于重命名和转换操作，先使用干运行模式测试
4. 如果遇到内存错误，尝试减小样本大小或分批处理 